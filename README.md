# Scheme | 2022-03-30 μ΄ν›„ ν•΄λ‹Ή λ νμ§€ν† λ¦¬λ” μ μ§€λ³΄μλμ§€ μ•μµλ‹λ‹¤.

κ°„νΈν• μκ°€μ§„λ‹¨κ³Ό κΈ‰μ‹ μ΅°ν

## π”§ μ‚¬μ© λ° μ„¤μ •λ²•

Node.js >= 16.6.0, git, MongoDB κ°€ ν•„μ”ν•©λ‹λ‹¤.

```bash
# npmμ„ μµμ‹ λ²„μ „μΌλ΅ μ—…λ°μ΄νΈν•©λ‹λ‹¤.
npm install npm -g

# ν•΄λ‹Ή λ¦¬ν¬μ§€ν† λ¦¬λ¥Ό ν΄λ΅ ν•κ±°λ‚ λ΅μ»¬λ΅ λ‹¤μ΄λ΅λ“ν•©λ‹λ‹¤.
git clone https://github.com/dhfhfk/scheme.git
cd scheme

# ν•„μ λ¨λ“μ„ λ‹¤μ΄λ΅λ“ν•©λ‹λ‹¤.
npm install
```

[config.json](./config.example.json)μ„ μ•λ§κ² μμ •ν•΄μ•Ό ν•©λ‹λ‹¤.

<details>
<summary>config.jsonμ— λ€ν• μμ„Έν• μ„¤λ…</summary>
<div markdown="1">

```json
{
    "bot": {
        "token": "λ””μ¤μ½”λ“ κ°λ°μ νμ΄μ§€μ—μ„ μƒμ„±ν• Botμ Tokenμ…λ‹λ‹¤. "
        "guild_id": "κ΄€λ¦¬μμ© κ΄€λ¦¬ λ…λ Ήμ–΄λ¥Ό μ‚¬μ©ν•  λ””μ¤μ½”λ“ μ„λ²„μ IDμ…λ‹λ‹¤."
        "prefix": "ν„μ¬ μ‚¬μ©ν•μ§€ μ•μ§€λ§ λ‚μ¤‘μ„ μ„ν• λ…λ Ήμ–΄ μ ‘λ‘μ‚¬μ…λ‹λ‹¤. (μ•„λ¬΄λ ‡κ²λ‚ μ…λ ¥ν•μ„Έμ”)"
    },
    "db": {
        "mongopath": "Mongodb λ°μ΄ν„°λ² μ΄μ¤μ κ²½λ΅λ¥Ό μ…λ ¥ν•©λ‹λ‹¤. μμ‹) mongodb://localhost:27017/discordbot"
    },
    "services": {
        "neis_key": "open.neis.go.kr μ—μ„ λ°κΈ‰λ°›μ€ api keyμ…λ‹λ‹¤."
        "user_limit": "λ””μ¤μ½”λ“ μ‚¬μ©μ ν• λ…λ‹Ή λ“±λ΅ν•  μ μλ” μκ°€μ§„λ‹¨ μ‚¬μ©μ μ μ…λ‹λ‹¤. μΌλ¶€ μ„λΉ„μ¤λ” μ•„μ§ 1λ…λ§ μ§€μ›ν•©λ‹λ‹¤."
        "secret_key": "μ‚¬μ©μμ μκ°€μ§„λ‹¨ λΉ„λ°€λ²νΈλ¥Ό μ•”νΈν™”ν•λ” λΉ„λ°€ν‚¤μ…λ‹λ‹¤. λ³΄μ• μμ¤€μ— μ•λ§λ” λλ¤ λ¬Έμμ—΄λ΅ μ…λ ¥ν•μ„Έμ”."
    },
    "color": {
        "error": "#da2723",
        "delete": "#ed4245",
        "success": "#3fbf4f",
        "primary": "#e68947"
    },
    "emojis": {
        "done": "<:green_done:918422764778577980>",
        "x": "<:red_x:918422764757598208>",
        "delete": "<:delete_forever:901147281485623376>"
    }
}
```

</div>
</details>

```bash
# μμ‹ μ΄ μ›ν•λ” ν…μ¤νΈ μ—λ””ν„°λ¥Ό μ‚¬μ©ν•©λ‹λ‹¤.
nano config.example.json

# μμ • ν›„ νμΌμ μ΄λ¦„μ„ λ³€κ²½ν•©λ‹λ‹¤.
mv config.example.json config.json

# μµμ…1: μ§μ ‘ μ‹¤ν–‰ν•©λ‹λ‹¤.
node .

# (μ¶”μ²) μµμ…2: pm2μ— λ“±λ΅ν•©λ‹λ‹¤.
pm2 start ecosystem.config.js
```

## λ°μ΄ν„°λ² μ΄μ¤ ν•μ‹

μ‚¬μ©μμ μ •λ³΄λ¥Ό μ €μ¥ν•κΈ° μ„ν•΄ ν•΄λ‹Ή λ΄‡μ€ Mongodbλ¥Ό μ‚¬μ©ν•©λ‹λ‹¤. μ €μ¥ ν•μ‹μ€ λ‹¤μκ³Ό κ°™μµλ‹λ‹¤.

```json
{
    "_id": "λ””μ¤μ½”λ“ μ‚¬μ©μμ Id",
    "school": {
        "name": "ν•™κµλ…",
        "endpoint": "μκ°€μ§„λ‹¨ κµμ΅μ²­ μ£Όμ†",
        "sc": "μ‹λ„κµμ΅μ²­μ½”λ“",
        "sd": "ν‘μ¤€ ν•™κµμ½”λ“",
        "org": "κΈ°κ΄€μ½”λ“"
    },
    "users": [
        {
            "name": "μκ°€μ§„λ‹¨ μ‚¬μ©μμ μ΄λ¦„",
            "encName": "μ•”νΈν™”λ μ‚¬μ©μμ μ΄λ¦„",
            "encBirth": "μ•”νΈν™”λ μ‚¬μ©μμ μƒλ…„μ›”μΌ",
            "password": "μ•”νΈν™”λ μκ°€μ§„λ‹¨μ© λΉ„λ°€λ²νΈ",
            "endpoint": "μκ°€μ§„λ‹¨ κµμ΅μ²­ μ£Όμ†",
            "org": "κΈ°κ΄€μ½”λ“"
        }
    ],
    "schedule": {
        "type": "μ¤μΌ€μ¤„ μ‹κ°„λ€ (A, B, C)",
        "kinds": "μ¤μΌ€μ¤„ νƒ€μ… (A, B, C) ",
        "channelId": "μ¤μΌ€μ¤„ λ©”μ‹μ§€λ¥Ό μ „μ†΅ν•  μ±„λ„ ID",
        "paused": "μ¤μΌ€μ¤„ μΌμ‹μ •μ§€ μ—¬λ¶€ Boolean"
    }
}
```

## β— μ£Όμμ‚¬ν•­

-   ν•΄λ‹Ή λ΄‡μ μλ™ μκ°€μ§„λ‹¨ κΈ°λ¥μ„ μ‚¬μ©ν•μ—¬ λ°μƒν•λ” λ¬Έμ μ μ±…μ„μ€ μ‚¬μ©μμ—κ² μμµλ‹λ‹¤. κ±΄κ°•μƒμ λ¬Έμ κ°€ μλ‹¤λ©΄ λ°λ“μ‹ μ§μ ‘ μκ°€μ§„λ‹¨μ„ μν–‰ν•μ‹κΈ° λ°”λλ‹λ‹¤.
-   ν† μ΄ν”„λ΅μ νΈλ΅ μ‹μ‘ν• λ νμ§€ν† λ¦¬λ΅, ν„μ¬ λΉ„ν¨μ¨μ μΈ μ½”λ“λ¥Ό κ³ μ³κ°€κ³  μμµλ‹λ‹¤.
-   κ°λ°μμ ν•κ³„μƒ μ•„μ§ ν•΄κ²°ν•μ§€ λ»ν• μ΄μκ°€ κ½¤ λ§μ΄ μ΅΄μ¬ν•©λ‹λ‹¤. μ¤λ¥ μμ • PRμ€ ν™μμ…λ‹λ‹¤.
